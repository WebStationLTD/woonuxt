# –ü–æ–ø—Ä–∞–≤–∫–∞: –ú–µ—Ç–æ–¥–∏—Ç–µ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–µ —Å–µ –ø–æ–∫–∞–∑–≤–∞—Ç –≤ checkout

## üìÖ –î–∞—Ç–∞: 02.01.2026

## üéØ –ü—Ä–æ–±–ª–µ–º
–í checkout —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ –Ω–µ —Å–µ –ø–æ–∫–∞–∑–≤–∞—Ö–∞ –º–µ—Ç–æ–¥–∏—Ç–µ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ (ShippingOptions).

## üîç –ü—Ä–∏—á–∏–Ω–∞
WooCommerce –∏–∑–∏—Å–∫–≤–∞ –∞–¥—Ä–µ—Å –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞, –∑–∞ –¥–∞ –∏–∑—á–∏—Å–ª–∏ –Ω–∞–ª–∏—á–Ω–∏—Ç–µ –º–µ—Ç–æ–¥–∏ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ä—Ç `BillingDetails` –ù–ï –æ–±–Ω–æ–≤—è–≤–∞—à–µ –∞–¥—Ä–µ—Å–∞ –≤ WooCommerce –∫–æ–≥–∞—Ç–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –ø–æ–ø—ä–ª–≤–∞—à–µ –ø–æ–ª–µ—Ç–∞—Ç–∞.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. **BillingDetails.vue** - –î–æ–±–∞–≤–µ–Ω watch –∑–∞ –ø—Ä–æ–º–µ–Ω–∏ –≤ –∞–¥—Ä–µ—Å–∞

**–§–∞–π–ª:** `woonuxt_base/app/components/forms/BillingDetails.vue`

**–î–æ–±–∞–≤–µ–Ω–æ:**
```typescript
// Watch –∑–∞ –ø—Ä–æ–º–µ–Ω–∏ –≤ –≥—Ä–∞–¥–∞ –∏ –∞–¥—Ä–µ—Å–∞ - –æ–±–Ω–æ–≤—è–≤–∞–º–µ –º–µ—Ç–æ–¥–∏—Ç–µ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞
watch(
  () => [billing.value.city, billing.value.address1],
  async ([newCity, newAddress], [oldCity, oldAddress]) => {
    // –û–±–Ω–æ–≤—è–≤–∞–º–µ —Å–∞–º–æ –∞–∫–æ —Å–∞ –ø–æ–ø—ä–ª–Ω–µ–Ω–∏ –∏ –∏ –¥–≤–µ—Ç–µ –ø–æ–ª–µ—Ç–∞ –ò –∏–º–∞ –ø—Ä–æ–º—è–Ω–∞
    if (newCity && newAddress && (newCity !== oldCity || newAddress !== oldAddress)) {
      // Debounce - —á–∞–∫–∞–º–µ 500ms —Å–ª–µ–¥ –ø–æ—Å–ª–µ–¥–Ω–∞—Ç–∞ –ø—Ä–æ–º—è–Ω–∞
      await new Promise(resolve => setTimeout(resolve, 500));
      await updateShippingLocation();
    }
  },
  { deep: true }
);
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∏:**
1. –°–ª–µ–¥–∏ –∑–∞ –ø—Ä–æ–º–µ–Ω–∏ –≤ `city` –∏ `address1` –ø–æ–ª–µ—Ç–∞—Ç–∞
2. –ö–æ–≥–∞—Ç–æ –∏ –¥–≤–µ—Ç–µ —Å–∞ –ø–æ–ø—ä–ª–Ω–µ–Ω–∏ ‚Üí –∏–∑–≤–∏–∫–≤–∞ `updateShippingLocation()`
3. Debounce –æ—Ç 500ms –∑–∞ –¥–∞ –Ω–µ –ø—Ä–∞–≤–∏ –ø—Ä–µ–∫–∞–ª–µ–Ω–æ –º–Ω–æ–≥–æ –∑–∞—è–≤–∫–∏
4. `updateShippingLocation()` –æ–±–Ω–æ–≤—è–≤–∞ –∞–¥—Ä–µ—Å–∞ –≤ WooCommerce –∏ –ø—Ä–∞–≤–∏ `refreshCart()`
5. –°–ª–µ–¥ `refreshCart()` ‚Üí `cart.availableShippingMethods` —Å–µ –ø–æ–ø—ä–ª–≤–∞
6. –ú–µ—Ç–æ–¥–∏—Ç–µ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–µ –ø–æ–∫–∞–∑–≤–∞—Ç –≤ checkout

### 2. **checkout.vue** - –î–æ–±–∞–≤–µ–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ —Å—ä–æ–±—â–µ–Ω–∏–µ

**–§–∞–π–ª:** `woonuxt_base/app/pages/checkout.vue`

**–î–æ–±–∞–≤–µ–Ω–æ:**
```vue
<!-- Debug: –ü–æ–∫–∞–∑–≤–∞–º–µ –∞–∫–æ –Ω—è–º–∞ –º–µ—Ç–æ–¥–∏ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ -->
<div v-else-if="!cart.availableShippingMethods || !cart.availableShippingMethods.length" 
     class="mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
  <p class="text-sm text-yellow-800">
    <Icon name="ion:warning" size="18" class="inline-block mr-1" />
    <strong>–ú–æ–ª—è, –ø–æ–ø—ä–ª–Ω–µ—Ç–µ –∞–¥—Ä–µ—Å–∞ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞</strong>, –∑–∞ –¥–∞ —Å–µ –ø–æ–∫–∞–∂–∞—Ç –Ω–∞–ª–∏—á–Ω–∏—Ç–µ –º–µ—Ç–æ–¥–∏ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞.
  </p>
</div>
```

–¢–æ–≤–∞ —Å—ä–æ–±—â–µ–Ω–∏–µ —Å–µ –ø–æ–∫–∞–∑–≤–∞ –∞–∫–æ:
- –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –æ—â–µ –Ω–µ –µ –ø–æ–ø—ä–ª–Ω–∏–ª –∞–¥—Ä–µ—Å–∞
- WooCommerce –Ω–µ –µ –≤—ä—Ä–Ω–∞–ª –º–µ—Ç–æ–¥–∏ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞

## üîÑ Flow –Ω–∞ —Ä–∞–±–æ—Ç–∞

1. **–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª –≤–ª–∏–∑–∞ –≤ checkout**
   - `cart.availableShippingMethods` –µ –ø—Ä–∞–∑–µ–Ω
   - –ü–æ–∫–∞–∑–≤–∞ —Å–µ –∂—ä–ª—Ç–æ —Å—ä–æ–±—â–µ–Ω–∏–µ: "–ú–æ–ª—è, –ø–æ–ø—ä–ª–Ω–µ—Ç–µ –∞–¥—Ä–µ—Å–∞ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞"

2. **–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª –ø–æ–ø—ä–ª–≤–∞ –≥—Ä–∞–¥**
   - Watch —Å–µ –∞–∫—Ç–∏–≤–∏—Ä–∞, –Ω–æ —á–∞–∫–∞ –∏ –∑–∞ –∞–¥—Ä–µ—Å

3. **–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª –ø–æ–ø—ä–ª–≤–∞ –∞–¥—Ä–µ—Å**
   - Watch —Å–µ –∞–∫—Ç–∏–≤–∏—Ä–∞
   - –ß–∞–∫–∞ 500ms (debounce)
   - –ò–∑–≤–∏–∫–≤–∞ `updateShippingLocation()`

4. **updateShippingLocation() –ø—Ä–∞–≤–∏:**
   - –û–±–Ω–æ–≤—è–≤–∞ `customer.billing` –≤ WooCommerce
   - –ò–∑–≤–∏–∫–≤–∞ `refreshCart()`
   - WooCommerce –∏–∑—á–∏—Å–ª—è–≤–∞ –º–µ—Ç–æ–¥–∏—Ç–µ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞
   - `cart.availableShippingMethods` —Å–µ –ø–æ–ø—ä–ª–≤–∞

5. **–ú–µ—Ç–æ–¥–∏—Ç–µ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–µ –ø–æ–∫–∞–∑–≤–∞—Ç**
   - `ShippingOptions` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ä—Ç —Å–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ä–∞
   - –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –º–æ–∂–µ –¥–∞ –∏–∑–±–µ—Ä–µ –º–µ—Ç–æ–¥ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞

## üìä GraphQL Flow

```
BillingDetails (user fills address)
  ‚Üì
watch triggers
  ‚Üì
updateShippingLocation()
  ‚Üì
GqlUpdateCustomer({ billing, shipping })
  ‚Üì
refreshCart()
  ‚Üì
GqlGetCart()
  ‚Üì
cart.availableShippingMethods gets populated
  ‚Üì
ShippingOptions component renders
```

## ‚ö†Ô∏è –í–∞–∂–Ω–∏ –±–µ–ª–µ–∂–∫–∏

1. **Debounce –æ—Ç 500ms** –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è–≤–∞ –ø—Ä–µ–∫–∞–ª–µ–Ω–æ –º–Ω–æ–≥–æ –∑–∞—è–≤–∫–∏ –¥–æ–∫–∞—Ç–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –ø–∏—à–µ
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –∏ –¥–≤–µ—Ç–µ –ø–æ–ª–µ—Ç–∞** (–≥—Ä–∞–¥ –ò –∞–¥—Ä–µ—Å) –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞ —á–µ –∏–º–∞ –¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
3. **Deep watch** —Å–ª–µ–¥–∏ –∑–∞ –ø—Ä–æ–º–µ–Ω–∏ –≤ nested properties
4. **updateShippingLocation()** –≤–µ—á–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—à–µ –≤ `useCheckout.ts`, –ø—Ä–æ—Å—Ç–æ –Ω–µ —Å–µ –∏–∑–≤–∏–∫–≤–∞—à–µ

## üîç –¢–µ—Å—Ç–≤–∞–Ω–µ

–ü—Ä–æ–≤–µ—Ä–µ—Ç–µ:
1. **–í–ª–µ–∑—Ç–µ –≤ checkout —Å –ø—Ä–∞–∑–Ω–∞ –∫–æ–ª–∏—á–∫–∞** ‚Üí –Ω–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞ –≥—Ä–µ—à–∫–∏
2. **–î–æ–±–∞–≤–µ—Ç–µ –ø—Ä–æ–¥—É–∫—Ç –∏ –≤–ª–µ–∑—Ç–µ –≤ checkout** ‚Üí —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –ø–æ–∫–∞–∂–µ –∂—ä–ª—Ç–æ —Å—ä–æ–±—â–µ–Ω–∏–µ
3. **–ü–æ–ø—ä–ª–Ω–µ—Ç–µ –≥—Ä–∞–¥** ‚Üí –≤—Å–µ –æ—â–µ –∂—ä–ª—Ç–æ —Å—ä–æ–±—â–µ–Ω–∏–µ
4. **–ü–æ–ø—ä–ª–Ω–µ—Ç–µ –∞–¥—Ä–µ—Å** ‚Üí —Å–ª–µ–¥ 500ms –º–µ—Ç–æ–¥–∏—Ç–µ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –ø–æ—è–≤—è—Ç
5. **–ü—Ä–æ–º–µ–Ω–µ—Ç–µ –≥—Ä–∞–¥–∞** ‚Üí –º–µ—Ç–æ–¥–∏—Ç–µ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –æ–±–Ω–æ–≤—è—Ç

## üöÄ Deployment

–ù—è–º–∞ –Ω—É–∂–¥–∞ –æ—Ç –ø—Ä–æ–º–µ–Ω–∏ –≤ –±–µ–∫–µ–Ω–¥–∞ - –≤—Å–∏—á–∫–æ –µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

---

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** 02.01.2026

